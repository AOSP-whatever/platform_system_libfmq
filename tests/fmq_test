source /data/nativetest64/hidl_test_helper

function run_fmq_test() {
    local RUN_MODE=$1
    if [ "${RUN_MODE}" == "-mVTS" ]; then
       TREBLE_TESTING_OVERRIDE=true run_all_tests \
         "/data/local/tmp/32/android.hardware.tests.msgq@1.0-service-test/android.hardware.tests.msgq@1.0-service-test" \
         "/data/local/tmp/64/android.hardware.tests.msgq@1.0-service-test/android.hardware.tests.msgq@1.0-service-test" \
         "/data/local/tmp/32/mq_test_client/mq_test_client" \
         "/data/local/tmp/64/mq_test_client/mq_test_client" \
         "fmq_test" \
         "-x/data/local/tmp/system/lib" \
         "-y/data/local/tmp/system/lib64"
    else
       TREBLE_TESTING_OVERRIDE=true run_all_tests \
          "/data/nativetest/android.hardware.tests.msgq@1.0-service-test/android.hardware.tests.msgq@1.0-service-test" \
          "/data/nativetest64/android.hardware.tests.msgq@1.0-service-test/android.hardware.tests.msgq@1.0-service-test" \
          "/data/nativetest/mq_test_client/mq_test_client" \
          "/data/nativetest64/mq_test_client/mq_test_client" \
          "fmq_test"
    fi
}

run_fmq_test $@

